<div class="row result-view" ng-hide='!crawlData.data'>
	<ul class="nav nav-pills pull-right">
		<li class="filter" ng-if="activeResultType==='CSV'">
			<label>Filter</label>
			<input class="form-control" ng-model="search.text">
		</li>
		<li>
			<a target="_self" download="{{route.name}}.txt" href="/api/routes/{{user._id}}/{{route.name}}">Download</a>
		</li>
		<li ng-if="activeResultType==='CSV'" ng-class="{active:hover}" ng-mouseenter="hover = true" ng-mouseleave="hover = false">
			<a clip-copy = "copyToClipBoard()" id="copyToClipBoardBtn">Copy</a>

		</li>
		<li ng-repeat="type in resultTypes | orderBy:'-index'" ng-class="{active:activeResultType===type.name}" class="resultType">
			<a ng-click="setActiveType(type)">{{type.name}}&nbsp; </a>
		</li>
	</ul>
</div>
<div ng-if="activeResultType !== 'CSV'">
	<textarea ng-model="dataPreview" class="textareaPreview"> </textarea>
</div>
<table id='dataPreviewTable' ng-if="activeResultType == 'CSV'">
  <tr>
    <th>
    <a  ng-click="orderByField.name='index';reverseSort=!reverseSort" style="cursor:pointer">
    	index
    <span ng-if="odbf();orderByField.name==='index'">
    		<span ng-if="!reverseSort">^</span>
    		<span ng-if="reverseSort">v</span>
    </span>
    </a>
    </th>
    <th ng-repeat='header in headers'>
    <a ng-click="odbf();orderByField.name=header;reverseSort=!reverseSort"style="cursor:pointer">
    	{{ header }}
    <span ng-if="orderByField.name===header">
    		<span ng-if="!reverseSort">^</span>
    		<span ng-if="reverseSort">v</span>
    </span>
    </a>
    </th>
  </tr>
	<span ng-hide='!crawlData.data'>
	  <tr ng-repeat='r in rows | filter:dataFilter() | orderBy:sortData'>
	    <td>{{ r.index }}</td>
	    <td ng-repeat='header in headers'>{{ crawlData.data[header][r.index] }}</td>
	  </tr>
	</span>
</table>
