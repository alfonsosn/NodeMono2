<div class="row result-view">
	<ul class="nav nav-pills pull-right">
		<li class="filter" ng-if="activeResultType==='CSV'">
			<label>Filter</label>
			<input class="form-control" ng-model="search.text">
		</li>
		<li>
			<a target="_self" download="{{pipe.name}}.txt" href="/api/pipes/{{user._id}}/{{pipe.name}}">Download</a>
		</li>
		<li ng-if="activeResultType==='CSV'" ng-class="{active:hover}" ng-mouseenter="hover = true" ng-mouseleave="hover = false">
			<a clip-copy="copyToClipBoard()" id="copyToClipBoardBtn">Copy</a>
		</li>
		<li ng-repeat="type in resultTypes | orderBy:'-index'" ng-class="{active:activeResultType===type}" class="resultType">
			<a ng-click="setActiveType(type)">{{type}}&nbsp; </a>
		</li>
	</ul>
</div>

<div class="data-preview">
	<div ng-if="activeResultType!=='CSV'">
		<!-- <pre class="pipeDataPre">{{dataPreview}}</pre> -->
		<textarea class="textareaPreview">{{dataPreview}}</textarea>
	</div>
	<div id="pipePreviewContainer">
		<div ng-if="waiting" class="alert alert-info" role="alert">
		  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
		  Waiting for the data ...
		</div>
		<div ng-if="noData" class="alert alert-danger" role="alert">
		  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
		  No data was returned
		</div>
		<table ng-hide="noData || waiting" id='pipePreviewTable' ng-if="activeResultType=='CSV'">
		  <tr>
		    <th>index</th>
		    <th ng-repeat='header in headers'>
		    	{{ isInterleaved ? header : header.name }}
		    </th>
		  </tr>
		  <tr ng-repeat='r in rows | filter:dataFilter()'>
		    <td class="index-column">{{ r.index }}</td>
		    <td ng-repeat='header in headers' class="data-column">
		    	{{ isInterleaved ? data[r.index][header] : data[header.dataIdx][header.name][r.index] }}
		    </td>
		  </tr>
		</table>
	</div>
</div>
