<!-- from kimono -->

<div class="main-container">
	<div class="container profile-container">
		<div class="row">
			<div class="col-md-12">
				<section class="api-header">
					<h1 style="margin-bottom:20px;">{{user.name}} <small>{{user.email}}</small></h1>
					<div style="margin-bottom:20px">
						<p class="api-key-label">Your API Key:</p>
						<pre class="api-key">{{user._id}}</pre>
						<button ng-hide="showResetWarning" class="btn btn-default btn-xs api-light-button rename-api-button" ng-click="resetApikeyButtonClicked()">Reset</button>
						<button ng-show="showResetWarning" class="btn btn-default btn-xs api-light-button rename-api-button" ng-click="cancelResetApikeyButtonClicked()">Cancel</button>
						<button ng-show="showResetWarning" class="btn btn-default btn-xs api-light-button rename-api-button" ng-click="resetApikeyButtonClicked()">Confirm</button>
						<span ng-show="showResetWarning" class="reset-apikey-warning">Are you sure? You will have to update all references to your API Key in your code.</span>
					</div>
				</section>
			</div>

			<div class="col-sm-12">

				<div>
					<div class="account-info">
						<div class="row">
							<div class="col-md-6">

								<div class="row">
									<div class="col-md-12">
										<h4>Pipes</h4>
										<table class="table table-striped table-condensed">
											<tbody>
												<tr>
													<th>Name</th>
													<th>Last Pipe Status</th>
													<th>Count</th>
												</tr>
												<tr ng-repeat="pipe in pipes">
													<td>
														<a ng-click="pipe.go(user._id)">{{pipe.name}}</a>
													</td>
													<td>
											            <span
											              id='nm-status'
											              ng-show='!editing.crawl'
											              ng-class="pipe.lastPipeSucceeded ? ['glyphicon glyphicon-ok-circle', 'success'] : ['glyphicon glyphicon-remove-circle', 'error']">
											            </span>
											            <span ng-model='pipeStatus'>{{ pipeStatus }} ({{ pipe.lastTimePiped | date : 'short' }})</span>
										          </td>
										          <td>{{pipe.count}}</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
							<div class="col-md-6">
								<div class="row">
									<div class="col-md-12">
										<h4>Routes</h4>
										<table class="table table-striped table-condensed">
											<tbody>
												<tr>
													<th>Name</th>
													<th>Last Crawl Status</th>
													<th>Count</th>
												</tr>
												<tr ng-repeat="route in routes">
													<td>
														<a ng-click="route.go(user._id)">{{route.name}}</a></td>
													<td>
											            <span
											              id='nm-status'
											              ng-show='!editing.crawl'
											              ng-class="route.lastCrawlSucceeded ? ['glyphicon glyphicon-ok-circle', 'success'] : ['glyphicon glyphicon-remove-circle', 'error']">
											            </span>
											            <span ng-model='crawlStatus'>{{ crawlStatus }} ({{ route.lastTimeCrawled | date : 'short' }})</span>
										          </td>
										          <td>{{route.count}}</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>        

				</div>
			</div>

		</div>

	</div>

</div>